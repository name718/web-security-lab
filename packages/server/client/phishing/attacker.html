<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ”»å‡»è€…åå°</title>
  <link rel="stylesheet" href="../xss/style.css">
</head>
<body>
  <div class="container">
    <nav class="nav">
      <a href="index.html">â† è¿”å› Phishing Lab</a>
    </nav>

    <header>
      <h1>ğŸ‘¤ æ”»å‡»è€…åå°</h1>
      <p class="subtitle">Attacker Dashboard</p>
    </header>

    <section>
      <h2>ğŸ£ è¢«çªƒå–çš„å‡­è¯</h2>
      <div style="margin-bottom: 1rem;">
        <button class="btn" onclick="loadCredentials()">ğŸ”„ åˆ·æ–°</button>
        <button class="btn btn-secondary" onclick="clearCredentials()">ğŸ—‘ï¸ æ¸…ç©º</button>
      </div>
      
      <div id="credentialsList">
        <p style="color: #888;">åŠ è½½ä¸­...</p>
      </div>
    </section>

    <section>
      <h2>ğŸ”“ éªŒè¯å‡­è¯</h2>
      <p>æµ‹è¯•è¢«çªƒå–çš„å‡­è¯æ˜¯å¦èƒ½ç™»å½•çœŸå®ç½‘ç«™ï¼š</p>
      
      <div style="max-width: 300px; margin: 1rem 0;">
        <div style="margin-bottom: 0.5rem;">
          <input type="text" id="testUsername" placeholder="ç”¨æˆ·å">
        </div>
        <div style="margin-bottom: 0.5rem;">
          <input type="password" id="testPassword" placeholder="å¯†ç ">
        </div>
        <button class="btn" onclick="verifyCredential()">éªŒè¯å‡­è¯</button>
      </div>
      
      <div id="verifyResult"></div>
    </section>

    <section>
      <h2>ğŸ“Š æ”»å‡»ç»Ÿè®¡</h2>
      <div class="types">
        <div class="type-card">
          <h3 id="totalCount">0</h3>
          <p>æ€»æ•è·æ•°</p>
        </div>
        <div class="type-card">
          <h3 id="validCount">-</h3>
          <p>æœ‰æ•ˆå‡­è¯</p>
        </div>
        <div class="type-card">
          <h3 id="totalBalance">-</h3>
          <p>æ½œåœ¨é‡‘é¢</p>
        </div>
      </div>
    </section>

    <section>
      <h2>ğŸ”— é’“é±¼é“¾æ¥</h2>
      <p>æ”»å‡»è€…ä¼šé€šè¿‡ä»¥ä¸‹æ–¹å¼ä¼ æ’­é’“é±¼é“¾æ¥ï¼š</p>
      
      <div class="info-box">
        <p><strong>é’“é±¼é‚®ä»¶ç¤ºä¾‹ï¼š</strong></p>
        <pre style="background: #fff; color: #333; padding: 1rem; margin-top: 0.5rem; border-radius: 4px;">
å°Šæ•¬çš„ç”¨æˆ·ï¼š

æ‚¨çš„è´¦æˆ·å­˜åœ¨å®‰å…¨é£é™©ï¼Œè¯·ç«‹å³ç™»å½•éªŒè¯ï¼š
<a href="fake-site.html" style="color: blue;">https://secure-bank.com/verify</a>

ï¼ˆå®é™…é“¾æ¥æŒ‡å‘é’“é±¼ç½‘ç«™ï¼‰

å®‰å…¨é“¶è¡Œå®¢æœ
        </pre>
      </div>

      <div class="warning-box" style="margin-top: 1rem;">
        <strong>å¸¸è§é’“é±¼åŸŸåæŠ€å·§ï¼š</strong>
        <ul style="margin: 0.5rem 0 0 1.5rem;">
          <li>secure-bank.com â†’ secure-bank.fake.com</li>
          <li>paypal.com â†’ paypa1.com (lâ†’1)</li>
          <li>google.com â†’ g00gle.com (oâ†’0)</li>
          <li>apple.com â†’ app1e.com</li>
        </ul>
      </div>
    </section>
  </div>

  <script>
    loadCredentials()

    async function loadCredentials() {
      const res = await fetch('/api/phishing/credentials')
      const credentials = await res.json()
      
      document.getElementById('totalCount').textContent = credentials.length

      const listEl = document.getElementById('credentialsList')
      
      if (credentials.length === 0) {
        listEl.innerHTML = '<p style="color: #888;">æš‚æ— æ•è·çš„å‡­è¯</p>'
        return
      }

      listEl.innerHTML = credentials.map((c, i) => `
        <div class="card" style="margin-bottom: 0.5rem;">
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <div>
              <strong style="color: #e94560;">#${credentials.length - i}</strong>
              <span style="margin-left: 1rem;">ğŸ‘¤ ${c.username}</span>
              <span style="margin-left: 1rem;">ğŸ”‘ ${c.password}</span>
            </div>
            <button class="btn btn-secondary" style="padding: 0.25rem 0.5rem; font-size: 0.85rem;" 
                    onclick="fillCredential('${c.username}', '${c.password}')">
              ä½¿ç”¨
            </button>
          </div>
          <div style="font-size: 0.85rem; color: #888; margin-top: 0.5rem;">
            æ¥æº: ${c.source} | æ—¶é—´: ${c.time}
          </div>
        </div>
      `).join('')
    }

    async function clearCredentials() {
      if (!confirm('ç¡®å®šæ¸…ç©ºæ‰€æœ‰å‡­è¯ï¼Ÿ')) return
      await fetch('/api/phishing/credentials', { method: 'DELETE' })
      loadCredentials()
    }

    function fillCredential(username, password) {
      document.getElementById('testUsername').value = username
      document.getElementById('testPassword').value = password
    }

    async function verifyCredential() {
      const username = document.getElementById('testUsername').value
      const password = document.getElementById('testPassword').value
      
      if (!username || !password) {
        alert('è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ')
        return
      }

      const res = await fetch('/api/phishing/verify', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ username, password })
      })
      const data = await res.json()

      const resultEl = document.getElementById('verifyResult')
      if (data.valid) {
        resultEl.innerHTML = `
          <div class="warning-box">
            <strong>ğŸš¨ å‡­è¯æœ‰æ•ˆï¼</strong>
            <p>${data.message}</p>
            <p>è´¦æˆ·ä½™é¢: <strong style="color: #51cf66;">Â¥${data.balance.toLocaleString()}</strong></p>
          </div>
        `
      } else {
        resultEl.innerHTML = `
          <div class="success-box">
            <strong>âŒ å‡­è¯æ— æ•ˆ</strong>
            <p>${data.message}</p>
          </div>
        `
      }
    }
  </script>
</body>
</html>
