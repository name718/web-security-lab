<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>é…ç½®æ–‡ä»¶æš´éœ² - æ•æ„Ÿä¿¡æ¯æ³„éœ²</title>
  <link rel="stylesheet" href="../xss/style.css">
  <style>
    .leak-data { background: #1a1a2e; color: #0f0; padding: 15px; border-radius: 8px; font-family: monospace; font-size: 12px; max-height: 300px; overflow: auto; white-space: pre-wrap; }
    .file-list { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin: 15px 0; }
    .file-btn { background: #263238; color: #fff; border: none; padding: 10px; border-radius: 4px; cursor: pointer; text-align: left; }
    .file-btn:hover { background: #37474f; }
  </style>
</head>
<body>
  <div class="container">
    <a href="index.html" class="back-link">â† è¿”å›æ•æ„Ÿä¿¡æ¯æ³„éœ²</a>
    <h1>âš™ï¸ å®éªŒä¸‰ï¼šé…ç½®æ–‡ä»¶æš´éœ²</h1>

    <div class="warning-box">
      <strong>âš ï¸ æ¼æ´åœºæ™¯</strong>
      <p>é…ç½®æ–‡ä»¶ã€ç¯å¢ƒå˜é‡ã€æºç ç­‰æ•æ„Ÿæ–‡ä»¶å¯è¢«ç›´æ¥è®¿é—®</p>
    </div>

    <section>
      <h2>ğŸ® æ¨¡æ‹Ÿæ”»å‡»</h2>
      <p>æ”»å‡»è€…å¸¸å°è¯•è®¿é—®çš„æ•æ„Ÿè·¯å¾„ï¼š</p>
      <div class="file-list">
        <button class="file-btn" onclick="fetchFile('/api/infoleak/unsafe/config')">ğŸ“„ /config.json</button>
        <button class="file-btn" onclick="fetchFile('/api/infoleak/unsafe/env')">ğŸ“„ /.env</button>
        <button class="file-btn" onclick="fetchFile('/api/infoleak/unsafe/source')">ğŸ“„ /server.js.bak</button>
        <button class="file-btn" onclick="fetchFile('/api/infoleak/unsafe/debug')">ğŸ“„ /debug</button>
      </div>
      
      <h3>æ³„éœ²å†…å®¹</h3>
      <div class="leak-data" id="file-content">é€‰æ‹©ä¸Šæ–¹æ–‡ä»¶æŸ¥çœ‹å†…å®¹...</div>
    </section>

    <section>
      <h2>ğŸ“‹ å¸¸è§æ•æ„Ÿæ–‡ä»¶</h2>
      <table class="info-table">
        <tr><th>æ–‡ä»¶</th><th>å†…å®¹</th><th>å±å®³ç­‰çº§</th></tr>
        <tr><td>.env</td><td>ç¯å¢ƒå˜é‡ã€å¯†é’¥</td><td>ğŸ”´ ä¸¥é‡</td></tr>
        <tr><td>.git/config</td><td>Git ä»“åº“ä¿¡æ¯</td><td>ğŸŸ  é«˜</td></tr>
        <tr><td>config.json</td><td>åº”ç”¨é…ç½®</td><td>ğŸ”´ ä¸¥é‡</td></tr>
        <tr><td>*.bak, *.old</td><td>å¤‡ä»½æ–‡ä»¶</td><td>ğŸŸ  é«˜</td></tr>
        <tr><td>package.json</td><td>ä¾èµ–ç‰ˆæœ¬</td><td>ğŸŸ¡ ä¸­</td></tr>
      </table>
    </section>

    <section>
      <h2>ğŸ›¡ï¸ é˜²å¾¡æªæ–½</h2>
      <pre><code># Nginx é…ç½®
location ~ /\. {
  deny all;  # ç¦æ­¢è®¿é—®éšè—æ–‡ä»¶
}

location ~* \.(env|config|bak|old|sql)$ {
  deny all;  # ç¦æ­¢è®¿é—®æ•æ„Ÿæ‰©å±•å
}

# .gitignore
.env
*.bak
config/*.json</code></pre>
    </section>
  </div>

  <script>
    async function fetchFile(url) {
      const res = await fetch(url)
      const text = await res.text()
      try {
        const json = JSON.parse(text)
        document.getElementById('file-content').textContent = JSON.stringify(json, null, 2)
      } catch {
        document.getElementById('file-content').textContent = text
      }
    }
  </script>
</body>
</html>
